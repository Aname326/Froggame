<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="enterDetails">
        <h1>Enter Details</h1>

        <h4>ID</h4>
        <input id="enterID" type="text">

        <h4>Name</h4>
        <input id="enterName" type="text">

        <h4>Age</h4>
        <input id="enterAge" type="number"> <br> <br>

        <button id="insert">INSERT</button>
        <button id="update">UPDATE</button>
        <button id="remove">remove</button>

    </div>

    <div id="findDetails">
        <h1>find by ID</h1>

        <h4>ID</h4>
        <input id="findID" type="text">
        <button id="find">FIND</button>

        <h3 id="findName" type="text"></h3>
        <h3 id="findAge" type="number"></h3> <br><br>

    </div>
</body>

<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.2/firebase-app.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyCwadC1LynGDoFY6dzMoKR9miBJXOkgiq8",
      authDomain: "testing-db-59e33.firebaseapp.com",
      databaseURL: "https://testing-db-59e33-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "testing-db-59e33",
      storageBucket: "testing-db-59e33.appspot.com",
      messagingSenderId: "703204953526",
      appId: "1:703204953526:web:9e43bdfd1abffa1a968517"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);

    import {getDatabase, set, get, update, remove, ref, child}
    from "https://www.gstatic.com/firebasejs/9.9.2/firebase-database.js"

    const db = getDatabase();

    var enterID = document.getElementById("enterID");
    var enterName = document.getElementById("enterName");
    var enterAge = document.getElementById("enterAge");
    var findID = document.getElementById("findID");
    var findName = document.getElementById("findName");
    var findAge = document.getElementById("findAge");

    var insertBtn = document.getElementById("insert")
    var updateBtn = document.getElementById("update")
    var removeBtn = document.getElementById("remove")
    var findBtn = document.getElementById("find")

    function insertData() {
        set(ref(db, "People/" + enterID.value), {  // "People/" is kind of creating a folder for the information to go in
            Name: enterName.value,
            ID: enterID.value,
            Age: enterAge.value
        })
        .then(() => {
            alert ("Data added successfully!")
        })
        .catch((error) => {
            alert(error)
        });
        console.log(set())
    }

    function findData() {
        const dbref = ref(db);

        get(child(dbref, "People/" + findID.value)) 
        .then((snapshot) => {
            if (snapshot.exists()) {
                findName.innerHTML = "Name: " + snapshot.val().Name;
                findAge.innerHTML = "Age: " + snapshot.val().Age;

            } else {
                alert("data not found");
            }
        })

        .catch((error) => {
            alert (error)
        })
    }

    function updateData() {
        update(ref(db, "People/" + enterID.value), {
            Name: enterName.value,
            Age: enterAge.value
        })
        .then(() => {
            alert("data update successfully!!!")
        })
        .catch((error) => {
            alert(error);
        });
    }

    function removeData() {
        remove(ref(db, "People/" + enterID.value))
        .then(() => {
            alert("data removed");
        })
        .catch((error) => {
            alert(error)
        })
        
    }

    insertBtn.addEventListener('click', insertData);
    updateBtn.addEventListener('click', updateData);
    removeBtn.addEventListener('click', removeData);
    findBtn.addEventListener('click', findData);

  </script>

</html>